# 区块链

## 第一部分

### 一、列举几个常见的合约攻击


### 二、什么是Layer0、Layer1、Layer2？

区块链具有六层架构：数据层、网络层、共识层、激励层、合约层和应用层

数据层和网络层是区块链的基本架构，也是整个区块链系统的最底层。

基本架构之上，共识层、激励层、合约层和应用层共同构成了区块链的协议部分。

1. Layer 0 又称数据传输层，对应OSI模型的底层，主要涉及区块链和传统网络之间的结合问题。
   1. 通常Layer 0是指传输数据的基础架构和协议层，一般承担的任务是区块链和传统互联网的结合，Layer 0当时也要负责和Layer 1 甚至和Layer 2的兼容，Layer 0作为基础，也经常会有扩容之类的需求，

    Polkadot是相对比较公认的一个提供了Layer 0的例子
    Polkadot项目主要是提供了一个叫中继链（Relay Chain）底层架构。

    这个中继链承担着保证在它之上的Layer 1的公链之间的沟通和安全的任务，换句话说，这个中继链是Layer 1的链互相高效沟通的信息桥梁，这也是为什么Polkadot经常被人称为是一个跨链的项目，这些在Polkadot中继链之上的，由开发者搭建起来的Layer 1的链，被称作Parachain，其中两个相对比较有名气的项目时Moonriver和Karura。

    因为他们在中继链的眼中，是平行的，是同一级别的。这种跨链的沟通，是非常有用的，因为良好的共通性，可以解决之前我们提到的目前比较不便的低效的信息共享问题

2. Layer 1 扩容方案又称链上扩容，指在区块链基层协议上实现的扩容解决方案。
   1. Layer 1定义可以说是区块链的底层架构和协议，他的另外一个名字是公链。
   2. Layer1的特点
       * 自己独立的链，不依赖于其他链，就可以独立运作
       * 支持独立运作，有配套的架构和参与机制，比如他们有自己的共识机制，有自己的Ledger(账本)，有自己的节点网络（node），有自己的加密算法，也有自己的原始代币
       * 他们通常都支持更上层的协议和应用从而打造他们自己的生态，但也有特殊情况，比如比特币的链，由于过于原始，在向上支持这一块做的比较少
   3. 知名的Layer 1 公链
       1. ethereum、Binance Smart Chain、TRON、Solana、Cardano
       2. 币币交易UniSwap、NFT交易平台OpenSea、稳定币DAI、链游axie

3. Layer 2 扩容方案又称链下扩容，指不改变区块链底层协议和基础规则，通过状态通道、侧链等方案提高交易处理速度。
   1. Layer 2是指以Layer 1为基础，建立在Layer 1之上的协议，他们并不是刚才我们提到的建立在Layer 1之上的应用，Layer 2的开发，其实目的也是为了解决很多Layer 1的问题，比如扩容和提速等等。

    其中比较通常的一个做法是，对于很多需要处理的复杂的交易，不是都在Layer 1的链上做处理和记录，

    而是拿下来在Layer 2的链处理，处理完之后，只是把处理结果的少量信息发回到Layer 1，

    目前主要的Layer 2还是围绕以太坊链来做的。

   2. 因为以太坊的生态是最大的，服务这个生态是最有利可图的，以太坊链有以下几个不同的扩容方案：
        Optimistic rollups 乐观汇总
        Zero-knowledge rollups 零知识汇总
        State channels 状态通道
        Sidechains 侧链
        Plasma 子链
        Validiums 有效性证明
    3. Layer 2和Layer 1 的主要区别
        他对节点的要求是很随意的

        不像Layer 1通常采用比较分布式的共识机制

        Layer 2的Node可能是一个或者一些server的cluster

        参与的可能是一大群个体，也可能是一个公司或者商业组织，甚至是少数的个人节点，除了Node之外，根据方向的不同，也可能被成为Operator、sequencer之类的。

        Layer 2的安全性还是主要依托于他对应的Layer 1的链

        Layer 1和Layer 2是有最广泛共识的
总结下来：
Layer 0是最底层的架构，用于帮助Layer 1的链之间的跨链沟通，同时有些也承担和传统网络沟通的任务

Layer 1是我们最常见的链，也是比较底层的架构，通常知名的Layer 1的链都有自己的庞大生态，Layer 1主要用来支持基于它的协议，在他上面开发的区块链应用。

Layer 2的链通常是为了实现Layer 1的扩容而存在的。

### 三、共识算法

